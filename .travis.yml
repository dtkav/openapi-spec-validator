language: python
sudo: false
matrix:
  include:
  - python: 2.7
  - python: 3.2
  - python: 3.3
  - python: 3.4
  - python: 3.5
  - python: 3.6
  - python: nightly
  - python: pypy3
  allow_failures:
  - python: 3.2
  - python: 3.3
  - python: nightly
before_install:
- if [[ $TRAVIS_PYTHON_VERSION == '3.2' ]]; then pip install 'coverage<4.0.0'; fi
- if [[ $TRAVIS_PYTHON_VERSION == '3.3' ]]; then pip install 'pyflakes<2.0.0'; fi
- pip install codecov
install:
- pip install -r requirements.txt
- pip install -r requirements_dev.txt
- pip install -e .
script:
- python setup.py test
after_success:
- codecov
deploy:
  provider: pypi
  user: dtkav
  password:
    secure: oXYGGSOGywWOrnx010vYMhzMKYklIrZBksMA/Clurk9aHzzBE8OFczm3ubHIwmkVUFtK3EBou7cAZVEXLf5b2nNAJDk1F2w5AU4lo0QfNzy3lOOPSnciWdaQKdeIE/HBMDIMbm+YpPVKwVH9/FPWaw9jnN/czCsvUKcxi3qvGRFqfpuEbpjQNVPKOs9uVzkX9AXwQI8gY5XvhjqbzXWgGQPrSG8Rw7eaFAgkbo05yXr/YiSqk63avtJIAxY6NWuW6lYkwcI2yhQYqFnM/m4FojbNTA3zEIAFHJLVbdK7FYCqPya9VrdFxkxNxJXhYDJusrb+G2JGVIxmz1+wvECt7yCr7ShuVjEebsF2tWK/SEIACzIOaMQWfWiElOdck0A1TV3pioEdmGV8r1gxl+Ii7lZXTof4A0Xa//WJjQ1JnfhisX88UOToLwoXzCTRvri2B7SM/t/OE16nFUakIr6Wc+HMqVgxpDxvgEQLH7drXxgK8qxecsmJUPigqrcuijzI/1buDraP4LU3IAwNcU0sHvTVwShQlntPK8Yn2R37Ne2b2X7BSIepa4Xkfyj5HuyKGQr4X+tBgjgda6LxIijYD2tffCAdN1jolYSM/ATAJC0G1zvhFYLFQXEKayg9Obq6AvlZ3FUV0PpXVKlx6fcvNH19rYDiX/WsBxlUZGyRLT4=
  distributions: sdist bdist_wheel
  on:
    tags: true
